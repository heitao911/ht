import{d as e,k as a,R as t,s as o,e as n,l,aq as s,aH as r,M as i,bn as u,O as p,Q as d,a3 as c,a0 as f,n as v,bp as m,bk as y,p as x,u as b,a6 as g,I as h,o as w,a8 as S,X as k,Y as z,q as C,y as E,G as I,Z as F,A as $,x as B,C as P,aa as M,t as R,v as V,ak as _,E as N,K as j,D as A,b9 as H,B as T,N as O,ac as K,z as W,_ as q,a4 as D,b5 as L,bq as Y,br as G,a5 as Q,H as U}from"../index.a5f35686.js";import{u as X}from"../index/index.93427e26.js";import{b as Z,d as J,a as ee,c as ae}from"../use-form-item/use-form-item.6a2c29aa.js";class te extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function oe(e,a){throw new te(`[${e}] ${a}`)}function ne(e,a){}const le="update:modelValue",se="change",re=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);let ie;const ue=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${e&&/firefox/i.test(window.navigator.userAgent)?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,pe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function de(e,a=1,t){var o;ie||(ie=document.createElement("textarea"),document.body.appendChild(ie));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:i}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),o=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),n=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:pe.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:t}}(e);ie.setAttribute("style",`${i};${ue}`),ie.value=e.value||e.placeholder||"";let u=ie.scrollHeight;const p={};"border-box"===s?u+=l:"content-box"===s&&(u-=n),ie.value="";const d=ie.scrollHeight-n;if(r(a)){let e=d*a;"border-box"===s&&(e=e+n+l),u=Math.max(e,u),p.minHeight=`${e}px`}if(r(t)){let e=d*t;"border-box"===s&&(e=e+n+l),u=Math.min(e,u)}return p.height=`${u}px`,null==(o=ie.parentNode)||o.removeChild(ie),ie=void 0,p}const ce=i({id:{type:String,default:void 0},size:u,disabled:Boolean,modelValue:{type:p([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:p([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:d},prefixIcon:{type:d},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:p([Object,Array,String]),default:()=>c({})},autofocus:{type:Boolean,default:!1}}),fe={[le]:e=>f(e),input:e=>f(e),change:e=>f(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ve=["role"],me=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],ye=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],xe=v({name:"ElInput",inheritAttrs:!1});const be=U(q(v({...xe,props:ce,emits:fe,setup(r,{expose:i,emit:u}){const p=r,d=m(),c=y(),f=x((()=>{const e={};return"combobox"===p.containerRole&&(e["aria-haspopup"]=d["aria-haspopup"],e["aria-owns"]=d["aria-owns"],e["aria-expanded"]=d["aria-expanded"]),e})),v=x((()=>["textarea"===p.type?pe.b():ue.b(),ue.m(se.value),ue.is("disabled",ie.value),ue.is("exceed",Ae.value),{[ue.b("group")]:c.prepend||c.append,[ue.bm("group","append")]:c.append,[ue.bm("group","prepend")]:c.prepend,[ue.m("prefix")]:c.prefix||p.prefixIcon,[ue.m("suffix")]:c.suffix||p.suffixIcon||p.clearable||p.showPassword,[ue.bm("suffix","password-clear")]:Ve.value&&_e.value},d.class])),q=x((()=>[ue.e("wrapper"),ue.is("focus",ze.value)])),U=X({excludeKeys:x((()=>Object.keys(f.value)))}),{form:te,formItem:oe}=Z(),{inputId:ne}=J(p,{formItemContext:oe}),se=ee(),ie=ae(),ue=b("input"),pe=b("textarea"),ce=o(),fe=o(),xe=a(!1),be=a(!1),ge=a(!1),he=a(),we=o(p.inputStyle),Se=x((()=>ce.value||fe.value)),{wrapperRef:ke,isFocused:ze,handleFocus:Ce,handleBlur:Ee}=function(e,{afterFocus:r,beforeBlur:i,afterBlur:u}={}){const p=t(),{emit:d}=p,c=o(),f=a(!1);return n(c,(e=>{e&&e.setAttribute("tabindex","-1")})),l(c,"click",(()=>{var a;null==(a=e.value)||a.focus()})),{wrapperRef:c,isFocused:f,handleFocus:e=>{f.value||(f.value=!0,d("focus",e),null==r||r())},handleBlur:e=>{var a;s(i)&&i(e)||e.relatedTarget&&(null==(a=c.value)?void 0:a.contains(e.relatedTarget))||(f.value=!1,d("blur",e),null==u||u())}}}(Se,{afterBlur(){var e;p.validateEvent&&(null==(e=null==oe?void 0:oe.validate)||e.call(oe,"blur").catch((e=>{})))}}),Ie=x((()=>{var e;return null!=(e=null==te?void 0:te.statusIcon)&&e})),Fe=x((()=>(null==oe?void 0:oe.validateState)||"")),$e=x((()=>Fe.value&&L[Fe.value])),Be=x((()=>ge.value?Y:G)),Pe=x((()=>[d.style,p.inputStyle])),Me=x((()=>[p.inputStyle,we.value,{resize:p.resize}])),Re=x((()=>Q(p.modelValue)?"":String(p.modelValue))),Ve=x((()=>p.clearable&&!ie.value&&!p.readonly&&!!Re.value&&(ze.value||xe.value))),_e=x((()=>p.showPassword&&!ie.value&&!p.readonly&&!!Re.value&&(!!Re.value||ze.value))),Ne=x((()=>p.showWordLimit&&!!U.value.maxlength&&("text"===p.type||"textarea"===p.type)&&!ie.value&&!p.readonly&&!p.showPassword)),je=x((()=>Re.value.length)),Ae=x((()=>!!Ne.value&&je.value>Number(U.value.maxlength))),He=x((()=>!!c.suffix||!!p.suffixIcon||Ve.value||p.showPassword||Ne.value||!!Fe.value&&Ie.value)),[Te,Oe]=function(e){const t=a();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(ce);g(fe,(e=>{if(We(),!Ne.value||"both"!==p.resize)return;const a=e[0],{width:t}=a.contentRect;he.value={right:`calc(100% - ${t+15+6}px)`}}));const Ke=()=>{const{type:a,autosize:t}=p;if(e&&"textarea"===a&&fe.value)if(t){const e=D(t)?t.minRows:void 0,a=D(t)?t.maxRows:void 0,o=de(fe.value,e,a);we.value={overflowY:"hidden",...o},h((()=>{fe.value.offsetHeight,we.value=o}))}else we.value={minHeight:de(fe.value).minHeight}},We=(e=>{let a=!1;return()=>{var t;if(a||!p.autosize)return;null===(null==(t=fe.value)?void 0:t.offsetParent)||(e(),a=!0)}})(Ke),qe=()=>{const e=Se.value,a=p.formatter?p.formatter(Re.value):Re.value;e&&e.value!==a&&(e.value=a)},De=async e=>{Te();let{value:a}=e.target;p.formatter&&(a=p.parser?p.parser(a):a),be.value||(a!==Re.value?(u(le,a),u("input",a),await h(),qe(),Oe()):qe())},Le=e=>{u("change",e.target.value)},Ye=e=>{u("compositionstart",e),be.value=!0},Ge=e=>{var a;u("compositionupdate",e);const t=null==(a=e.target)?void 0:a.value,o=t[t.length-1]||"";be.value=!re(o)},Qe=e=>{u("compositionend",e),be.value&&(be.value=!1,De(e))},Ue=()=>{ge.value=!ge.value,Xe()},Xe=async()=>{var e;await h(),null==(e=Se.value)||e.focus()},Ze=e=>{xe.value=!1,u("mouseleave",e)},Je=e=>{xe.value=!0,u("mouseenter",e)},ea=e=>{u("keydown",e)},aa=()=>{u(le,""),u("change",""),u("clear"),u("input","")};return n((()=>p.modelValue),(()=>{var e;h((()=>Ke())),p.validateEvent&&(null==(e=null==oe?void 0:oe.validate)||e.call(oe,"change").catch((e=>{})))})),n(Re,(()=>qe())),n((()=>p.type),(async()=>{await h(),qe(),Ke()})),w((()=>{!p.formatter&&p.parser,qe(),h(Ke)})),i({input:ce,textarea:fe,ref:Se,textareaStyle:Me,autosize:S(p,"autosize"),focus:Xe,blur:()=>{var e;return null==(e=Se.value)?void 0:e.blur()},select:()=>{var e;null==(e=Se.value)||e.select()},clear:aa,resizeTextarea:Ke}),(e,a)=>k((C(),E("div",j(B(f),{class:B(v),style:B(Pe),role:e.containerRole,onMouseenter:Je,onMouseleave:Ze}),[I(" input "),"textarea"!==e.type?(C(),E(F,{key:0},[I(" prepend slot "),e.$slots.prepend?(C(),E("div",{key:0,class:$(B(ue).be("group","prepend"))},[P(e.$slots,"prepend")],2)):I("v-if",!0),M("div",{ref_key:"wrapperRef",ref:ke,class:$(B(q))},[I(" prefix slot "),e.$slots.prefix||e.prefixIcon?(C(),E("span",{key:0,class:$(B(ue).e("prefix"))},[M("span",{class:$(B(ue).e("prefix-inner"))},[P(e.$slots,"prefix"),e.prefixIcon?(C(),R(B(N),{key:0,class:$(B(ue).e("icon"))},{default:V((()=>[(C(),R(_(e.prefixIcon)))])),_:1},8,["class"])):I("v-if",!0)],2)],2)):I("v-if",!0),M("input",j({id:B(ne),ref_key:"input",ref:ce,class:B(ue).e("inner")},B(U),{type:e.showPassword?ge.value?"text":"password":e.type,disabled:B(ie),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:p.form,autofocus:p.autofocus,onCompositionstart:Ye,onCompositionupdate:Ge,onCompositionend:Qe,onInput:De,onFocus:a[0]||(a[0]=(...e)=>B(Ce)&&B(Ce)(...e)),onBlur:a[1]||(a[1]=(...e)=>B(Ee)&&B(Ee)(...e)),onChange:Le,onKeydown:ea}),null,16,me),I(" suffix slot "),B(He)?(C(),E("span",{key:1,class:$(B(ue).e("suffix"))},[M("span",{class:$(B(ue).e("suffix-inner"))},[B(Ve)&&B(_e)&&B(Ne)?I("v-if",!0):(C(),E(F,{key:0},[P(e.$slots,"suffix"),e.suffixIcon?(C(),R(B(N),{key:0,class:$(B(ue).e("icon"))},{default:V((()=>[(C(),R(_(e.suffixIcon)))])),_:1},8,["class"])):I("v-if",!0)],64)),B(Ve)?(C(),R(B(N),{key:1,class:$([B(ue).e("icon"),B(ue).e("clear")]),onMousedown:T(B(O),["prevent"]),onClick:aa},{default:V((()=>[A(B(H))])),_:1},8,["class","onMousedown"])):I("v-if",!0),B(_e)?(C(),R(B(N),{key:2,class:$([B(ue).e("icon"),B(ue).e("password")]),onClick:Ue},{default:V((()=>[(C(),R(_(B(Be))))])),_:1},8,["class"])):I("v-if",!0),B(Ne)?(C(),E("span",{key:3,class:$(B(ue).e("count"))},[M("span",{class:$(B(ue).e("count-inner"))},K(B(je))+" / "+K(B(U).maxlength),3)],2)):I("v-if",!0),B(Fe)&&B($e)&&B(Ie)?(C(),R(B(N),{key:4,class:$([B(ue).e("icon"),B(ue).e("validateIcon"),B(ue).is("loading","validating"===B(Fe))])},{default:V((()=>[(C(),R(_(B($e))))])),_:1},8,["class"])):I("v-if",!0)],2)],2)):I("v-if",!0)],2),I(" append slot "),e.$slots.append?(C(),E("div",{key:1,class:$(B(ue).be("group","append"))},[P(e.$slots,"append")],2)):I("v-if",!0)],64)):(C(),E(F,{key:1},[I(" textarea "),M("textarea",j({id:B(ne),ref_key:"textarea",ref:fe,class:B(pe).e("inner")},B(U),{tabindex:e.tabindex,disabled:B(ie),readonly:e.readonly,autocomplete:e.autocomplete,style:B(Me),"aria-label":e.label,placeholder:e.placeholder,form:p.form,autofocus:p.autofocus,onCompositionstart:Ye,onCompositionupdate:Ge,onCompositionend:Qe,onInput:De,onFocus:a[2]||(a[2]=(...e)=>B(Ce)&&B(Ce)(...e)),onBlur:a[3]||(a[3]=(...e)=>B(Ee)&&B(Ee)(...e)),onChange:Le,onKeydown:ea}),null,16,ye),B(Ne)?(C(),E("span",{key:0,style:W(he.value),class:$(B(ue).e("count"))},K(B(je))+" / "+K(B(U).maxlength),7)):I("v-if",!0)],64))],16,ve)),[[z,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{se as C,be as E,le as U,ne as d,re as i,oe as t};
