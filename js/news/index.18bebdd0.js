import{as as a,U as e,aF as s,q as t,y as n,aa as l,D as i,v as o,A as c,x as r,Z as d,au as u,X as p,t as g,n as v,ac as m,aI as y,av as w,aw as h}from"../index.a5f35686.js";import{v as b,E as C}from"../el-image-viewer/el-image-viewer.2645b431.js";import{u as f,E as k}from"../usePagination/usePagination.63e87747.js";import"../el-input/el-input.6acfce04.js";import{E as x}from"../el-empty/el-empty.62adbcd2.js";import{E as j,a as z}from"../el-carousel-item/el-carousel-item.1faea023.js";import{a as L,b as T,c as I,d as P}from"../index/index.9154667f.js";import"../debounce/debounce.e4b91050.js";import"../index/index.93427e26.js";import"../scroll/scroll.175c78c7.js";import"../use-form-item/use-form-item.6a2c29aa.js";import"../validator/validator.cd03cf3b.js";import"../vnode/vnode.a095297d.js";const S=a=>(w("data-v-407321c1"),a=a(),h(),a),_={class:"news-article"},D={class:"news-article-box"},E={class:"box"},U=S((()=>l("div",{class:"cover"},null,-1))),N={class:"content"},q={class:"left"},A={class:"sort-list"},F=["onClick"],O={class:"table"},X=["onClick"],Z={class:"news-box"},B={class:"flex-c jsb content"},G={class:"intro"},H={class:"pagination-wrap"},J={class:"right"},K=S((()=>l("h1",null,"热门文章",-1))),M=["onClick"],Q={key:0,class:"news-box1"},R=S((()=>l("div",{class:"cover"},null,-1))),V={class:"img-wrap"},W={key:1,class:"news-box2"},Y={class:"flex-c jsb title"},$=v({name:"News"}),aa=a(Object.assign($,{setup(a,{expose:v}){const w=e({activeTab:"-1",categoryId:0,bannerList:[],newsCategory:[],hotspotContent:[],newsList:[],loading:!1});s((()=>{window.scroll({left:0,top:0,behavior:"smooth"}),h(),S(),$(),ea(!0)}));const h=async()=>{try{const a=await L({location:1});"1"===a.status&&(w.bannerList=a.data)}catch(a){}},S=async()=>{try{const a=await T();"1"===a.status&&(w.newsCategory=a.data)}catch(a){}},$=async()=>{try{const a=await I({type:0});"1"===a.status&&(w.hotspotContent=a.data)}catch(a){}},aa=(a,e)=>{sa.currentPage=1,w.activeTab=a+"",w.categoryId=e?e.id:0,ea()},ea=async a=>{try{const e={categoryId:w.categoryId,page:sa.currentPage,limit:sa.pageSize};w.loadingTab=!0;const{status:s,data:t}=await P(e);"1"===s&&(w.newsList=t.records||[],sa.recordCount=t.total,a||window.scroll({left:0,top:400,behavior:"smooth"}))}catch(e){}finally{w.loadingTab=!1}},{pageData:sa,handlePageChange:ta,handleSizeChange:na}=f(ea),la=a=>{window.open("/#/news/newsDetail/"+a,"_blank")};return v({requestData:ea}),(a,e)=>{const s=C,v=z,h=j,f=x,L=k,T=b;return t(),n("article",_,[l("div",D,[l("header",null,[i(h,{height:"350px",interval:3e3,type:"card"},{default:o((()=>[(t(!0),n(d,null,u(r(w).bannerList,((a,e)=>(t(),g(v,{key:e,onClick:e=>la(a.cid)},{default:o((()=>[l("div",E,[U,l("h2",null,m(a.title),1),i(s,{src:a.url,fit:"cover"},null,8,["src"])])])),_:2},1032,["onClick"])))),128))])),_:1})]),l("section",N,[l("article",q,[l("nav",null,[l("ul",A,[l("li",{class:c(["sort-item",{active:"-1"===r(w).activeTab}]),onClick:e[0]||(e[0]=a=>aa(-1,""))},"最新动态",2),(t(!0),n(d,null,u(r(w).newsCategory,((a,e)=>(t(),n("li",{class:c(["sort-item",{active:r(w).activeTab===e+""}]),key:e,onClick:s=>aa(e,a)},m(r(y)(a.name)),11,F)))),128))])]),p((t(),n("section",O,[r(w).newsList.length?(t(!0),n(d,{key:0},u(r(w).newsList,(a=>(t(),n("div",{class:"news-item",key:a.id,onClick:e=>la(a.id)},[l("div",Z,[i(s,{src:a.coverUrl,fit:"cover"},null,8,["src"]),l("div",B,[l("div",null,[l("h2",null,m(a.title),1),l("div",G,m(a.intro),1)]),l("span",null,m(r(y)(a.categoryName)),1)])])],8,X)))),128)):(t(),g(f,{key:1,class:"empty",description:"暂无数据"}))])),[[T,r(w).loadingTab]]),l("footer",H,[i(L,{background:"",layout:"prev,pager,next,total",onCurrentChange:r(ta),onSizeChange:r(na),"current-page":r(sa).currentPage,"page-size":r(sa).pageSize,total:r(sa).recordCount},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])])]),l("aside",J,[K,(t(!0),n(d,null,u(r(w).hotspotContent,((a,e)=>(t(),n("div",{class:"right-news",key:e,onClick:e=>la(a.id)},[e<=1?(t(),n("div",Q,[R,l("div",V,[i(s,{src:a.coverUrl,fit:"cover"},null,8,["src"])]),l("h2",null,m(a.title),1)])):(t(),n("div",W,[i(s,{src:a.coverUrl,fit:"cover"},null,8,["src"]),l("div",Y,[l("h2",null,m(a.title),1),l("span",null,m(r(y)(a.categoryName)),1)])]))],8,M)))),128))])])])])}}}),[["__scopeId","data-v-407321c1"]]);export{aa as default};
