import{as as a,U as e,aF as t,q as s,y as n,aa as i,D as o,v as l,A as c,x as r,Z as d,au as u,X as g,t as p,n as v,ac as m,aI as w,av as y,aw as h}from"../index.442e9d7b.js";import{v as b,E as f}from"../el-image-viewer/el-image-viewer.9ada8f06.js";import{u as C,E as k}from"../usePagination/usePagination.1aedf83c.js";import"../el-input/el-input.86ed9d70.js";import{E as j}from"../el-empty/el-empty.9dce098a.js";import{E as x,a as z}from"../el-carousel-item/el-carousel-item.c20fdabe.js";import{a as L,b as T,c as I,d as P}from"../index/index.27596de6.js";import{c as S}from"../config/config.02f49405.js";import"../debounce/debounce.9ff3260d.js";import"../index/index.bf141d65.js";import"../scroll/scroll.07de79ba.js";import"../use-form-item/use-form-item.34b578a1.js";import"../validator/validator.930a519d.js";import"../vnode/vnode.828f402a.js";const _=a=>(y("data-v-1e7a9280"),a=a(),h(),a),D={class:"news-article"},E={class:"news-article-box"},U={class:"box"},q=_((()=>i("div",{class:"cover"},null,-1))),N={class:"content"},O={class:"left"},A={class:"sort-list"},F=["onClick"],X={class:"table"},Z=["onClick"],B={class:"news-box"},G={class:"flex-c jsb content"},H={class:"intro"},J={class:"pagination-wrap"},K={class:"right"},M=_((()=>i("h1",null,"热门文章",-1))),Q=["onClick"],R={key:0,class:"news-box1"},V=_((()=>i("div",{class:"cover"},null,-1))),W={class:"img-wrap"},Y={key:1,class:"news-box2"},$={class:"flex-c jsb title"},aa=v({name:"News"}),ea=a(Object.assign(aa,{setup(a,{expose:v}){const y=e({activeTab:"-1",categoryId:0,bannerList:[],newsCategory:[],hotspotContent:[],newsList:[],loading:!1});t((()=>{window.scroll({left:0,top:0,behavior:"smooth"}),h(),_(),aa(),ta(!0)}));const h=async()=>{try{const a=await L({location:1});"1"===a.status&&(y.bannerList=a.data)}catch(a){}},_=async()=>{try{const a=await T();"1"===a.status&&(y.newsCategory=a.data)}catch(a){}},aa=async()=>{try{const a=await I({type:0});"1"===a.status&&(y.hotspotContent=a.data)}catch(a){}},ea=(a,e)=>{sa.currentPage=1,y.activeTab=a+"",y.categoryId=e?e.id:0,ta()},ta=async a=>{try{const e={categoryId:y.categoryId,page:sa.currentPage,limit:sa.pageSize};y.loadingTab=!0;const{status:t,data:s}=await P(e);"1"===t&&(y.newsList=s.records||[],sa.recordCount=s.total,a||window.scroll({left:0,top:400,behavior:"smooth"}))}catch(e){}finally{y.loadingTab=!1}},{pageData:sa,handlePageChange:na,handleSizeChange:ia}=C(ta),oa=a=>{const e=window.location.href.includes("github.io")?S.onlineOrigin:window.location.origin;window.open(e+"/#/news/newsDetail/"+a,"_blank")};return v({requestData:ta}),(a,e)=>{const t=f,v=z,h=x,C=j,L=k,T=b;return s(),n("article",D,[i("div",E,[i("header",null,[o(h,{height:"350px",interval:3e3,type:"card"},{default:l((()=>[(s(!0),n(d,null,u(r(y).bannerList,((a,e)=>(s(),p(v,{key:e,onClick:e=>oa(a.cid)},{default:l((()=>[i("div",U,[q,i("h2",null,m(a.title),1),o(t,{src:a.url,fit:"cover"},null,8,["src"])])])),_:2},1032,["onClick"])))),128))])),_:1})]),i("section",N,[i("article",O,[i("nav",null,[i("ul",A,[i("li",{class:c(["sort-item",{active:"-1"===r(y).activeTab}]),onClick:e[0]||(e[0]=a=>ea(-1,""))},"最新动态",2),(s(!0),n(d,null,u(r(y).newsCategory,((a,e)=>(s(),n("li",{class:c(["sort-item",{active:r(y).activeTab===e+""}]),key:e,onClick:t=>ea(e,a)},m(r(w)(a.name)),11,F)))),128))])]),g((s(),n("section",X,[r(y).newsList.length?(s(!0),n(d,{key:0},u(r(y).newsList,(a=>(s(),n("div",{class:"news-item",key:a.id,onClick:e=>oa(a.id)},[i("div",B,[o(t,{src:a.coverUrl,fit:"cover"},null,8,["src"]),i("div",G,[i("div",null,[i("h2",null,m(a.title),1),i("div",H,m(a.intro),1)]),i("span",null,m(r(w)(a.categoryName)),1)])])],8,Z)))),128)):(s(),p(C,{key:1,class:"empty",description:"暂无数据"}))])),[[T,r(y).loadingTab]]),i("footer",J,[o(L,{background:"",layout:"prev,pager,next,total",onCurrentChange:r(na),onSizeChange:r(ia),"current-page":r(sa).currentPage,"page-size":r(sa).pageSize,total:r(sa).recordCount},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])])]),i("aside",K,[M,(s(!0),n(d,null,u(r(y).hotspotContent,((a,e)=>(s(),n("div",{class:"right-news",key:e,onClick:e=>oa(a.id)},[e<=1?(s(),n("div",R,[V,i("div",W,[o(t,{src:a.coverUrl,fit:"cover"},null,8,["src"])]),i("h2",null,m(a.title),1)])):(s(),n("div",Y,[o(t,{src:a.coverUrl,fit:"cover"},null,8,["src"]),i("div",$,[i("h2",null,m(a.title),1),i("span",null,m(r(w)(a.categoryName)),1)])]))],8,Q)))),128))])])])])}}}),[["__scopeId","data-v-1e7a9280"]]);export{ea as default};
